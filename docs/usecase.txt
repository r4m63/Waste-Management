------------------------------------------------------------------------------------------------------------------------
Бизнес-процесс: Прием отходов от жителей

ID: 1
Главные актёры: Житель
Второстепенные актёры: Картографический сервис, ИС
Предусловия: Лендинг доступен; в ИС есть справочники точек и их статусы.
Основной поток:
Житель открывает карту.
Система загружает точки (адрес, график работы, статус “работает/закрыто”, “переполнена/свободна”).
Житель выбирает точку и строит маршрут/запоминает адрес.
Альтернативы:
ALT1 Нет сети/ошибка карт: показать сообщение и предложить повтор.
ALT2 Точка закрыта/переполнена: пометить и рекомендовать соседние точки.
UC1 Начать сессию на киоске

ID: 2
Главные актёры: Житель, POS-терминал
Второстепенные актёры: ИС, Принтер (для чеков позже)
Предусловия: Киоск онлайн, подключен к ИС.
Основной поток:
Экран приветствия; выбор языка.
Ввод номера телефона (для идентификации/баллов).
Создание сессии в ИС.
Выбор размера тары: XS/S/M/L/XL/XXL/XXXL.
POS выдаёт выбранную тару.
Альтернативы:
ALT1 Ошибка сети/ИС: локальный режим или отказ сессии.
ALT2 Тара недоступна/закончилась: предложить другой размер.
UC2 Сдача отходов: выбор типа и загрузка

ID: 3
Главные актёры: Житель, POS
Второстепенные актёры: ИС
Предусловия: Активная сессия (UC1); тара выдана.
Основной поток:
Выбор типа/подтипа отходов (фракция).
Житель загружает отходы в тару/приемник.
POS фиксирует приём (по объёму тары и/или внутренним датчикам/массе).
POS запрашивает тарификацию в ИС и готовит расчёт.
Альтернативы:
ALT1 Переполнение приёмника: остановка, предложение уменьшить объём/выбрать другую точку.
ALT2 Неверная фракция: сообщение и повтор выбора.
UC3 Подтверждение расчёта, чек и завершение

ID: 4
Главные актёры: POS
Второстепенные актёры: ИС, Фискальный принтер/Эквайринг
Предусловия: Расчёт выполнен (UC2).
Основной поток:
Показ суммы/баллов → Житель подтверждает.
POS создаёт запись партии/операции в ИС (привязка к номеру телефона).
Печать чека (или электронный чек/SMS).
Закрытие сессии.
Альтернативы:
ALT1 Отмена/корректировка: возврат к UC2.
ALT2 Ошибка печати: предложить эл. чек или повтор печати.
------------------------------------------------------------------------------------------------------------------------
Бизнес-процесс: Транспортировка

ID: 1 Ночное планирование маршрутов
Главные актёры: ИС (планировщик)
Второстепенные актёры: Картографический сервис/роутер, Телематика/GPS (история), Подсистема инвентаря тары
Предусловия: В ИС есть статусы точек: заполненность, доступность, остатки тары.
Основной поток:
ИС собирает кандидатов: точки с высокой/критичной заполненностью или нехваткой тары.
Запрашивает матрицу расстояний/времени у роутера.
Строит оптимальные маршруты (кластеризация, окна времени, ограничения ТС).
Резервирует требуемые тары/объёмы утилизации.
Готовит рейсы на день.
Альтернативы:
ALT1 Нет данных по точкам/роутеру → fallback-набор (по районам).
ALT2 Нарушены ограничения ТС → разбивка маршрута.

ID: 2 Назначение водителя и ТС
Главные актёры: Диспетчер/ИС
Второстепенные актёры: Приложение водителя
Предусловия: Сформированы рейсы (UC0).
Основной поток:
ИС подбирает водителя и доступное ТС с нужными параметрами (объём, класс опасности).
Публикует рейс в приложение водителя.
Водитель видит задачи на день.
Альтернативы: конфликт расписания → уведомление диспетчеру.

ID: 3 Старт смены водителя
Главные актёры: Водитель
Второстепенные актёры: ИС, Телематика
Предусловия: Есть назначенный рейс (UC1).
Основной поток: открыть смену, пройти чек-лист ТС (ТО, ПБ), зафиксировать старт (время/пробег/GPS).

ID: 4 Выполнение точек
Главные актёры: Водитель
Второстепенные актёры: ИС, Телематика, POS/контейнерная инфраструктура точки
Предусловия: Смена открыта (UC2).
Основной поток:
Навигация к точке (маршрут от ИС/карты).
Подтверждение прибытия (геофенс).
Операция на точке: забор отходов/замена тары; отметка статуса (время, объём/масса).
Синхронизация с ИС.
Альтернативы:
ALT1 Точка недоступна/закрыта → запрос коррекции (UC5).
ALT2 Переполнение ТС → досрочная сдача на объект (UC4).

ID: 5 Сдача груза на объект (перевалка/завод)
Главные актёры: Водитель
Второстепенные актёры: Весовая/приёмка объекта, ИС
Предусловия: В ТС есть груз.
Основной поток: въезд, взвешивание, сдача, фиксация массы/фракций, подтверждение в ИС.

ID: 6 Корректировка рейса (динамическое перепланирование)
Главные актёры: ИС/Диспетчер
Второстепенные актёры: Приложение водителя, Картографический сервис
Предусловия: Идёт исполнение рейса.
Основной поток: по событию (недоступна точка/пробки/инцидент/CLS ТС/дефицит тары) — пересчёт части маршрута, отправка обновлённого плана водителю.

ID: 7 Закрытие рейса
Главные актёры: Водитель
Второстепенные актёры: ИС, Отчётность/биллинг
Основной поток: контроль завершения всех точек или причин пропуска, финальная сдача, закрытие смены, генерация отчётов/начислений.
------------------------------------------------------------------------------------------------------------------------