@startuml
title Use Cases — Маршрутизация и рейс (Waste Management IS)
left to right direction
skinparam defaultFontName "DejaVu Sans"

actor "Диспетчер" as Dispatcher
actor "Водитель" as Driver
actor "Картографический сервис/роутер" as Router
actor "Телематика/GPS" as Telematics
actor "Весовая/Объект" as Weighbridge

rectangle "ИС (Планирование/Операции)" as IS {
  usecase "UC0 Ночное планирование\nмаршрутов" as UC0
  usecase "UC1 Назначить водителя и ТС" as UC1
  usecase "UC5 Корректировка рейса" as UC5
  usecase "UC6 Закрытие рейса" as UC6
}

rectangle "Приложение водителя" as App {
  usecase "UC2 Старт смены" as UC2
  usecase "UC3 Выполнение точек" as UC3
  usecase "UC4 Сдача груза\nна объект" as UC4
}

Dispatcher -- UC1
Driver -- UC2
Driver -- UC3
Driver -- UC4
Driver -- UC6

UC0 .. Router
UC0 .. Telematics : исторические данные
UC1 .. App : публикация рейса
UC3 .. Telematics : геофенс/трек
UC4 .. Weighbridge
UC5 .. Router : перестроение
UC5 .. App : пуш обновлённого плана

UC0 .> UC1 : <<include>>
UC2 .> UC3 : <<include>>
UC3 .> UC4 : <<extend>> (при переполнении ТС)
UC3 .> UC5 : <<extend>> (недоступна точка)
UC4 .> UC3 : <<return>>
UC3 .> UC6 : <<include>>
@enduml
