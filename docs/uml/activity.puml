@startuml
title Activity — Transport (Plan → Execute → Close)
skinparam defaultFontName "DejaVu Sans"
start
:Сбор статусов/инвентаря;
:Оптимизация маршрутов;\nназначение водителей/ТС;
:Публикация маршрутов в Driver App;

:Старт смены (чек-лист, GPS);
repeat
  :Навигация к точке;\nгеофенс прибыв.;
  if (Доступна?) then (Да)
    :Сбор/замена тары;\nфиксация объёма/массы;
    if (ТС переполнено?) then (Да)
      :Промежуточная сдача;\nвзвешивание/подтв.;
    endif
  else (Нет)
    :Запрос корректировки;\nполучить новый план;
  endif
repeat while (остались точки?)
:Финальная сдача;\nзакрытие рейса и смены;
stop
@enduml
