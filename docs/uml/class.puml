@startuml
title Domain Classes â€” Batch / Route / Stop
skinparam defaultFontName "DejaVu Sans"

class Batch {
  +id: UUID
  +phone: Phone
  +fraction: Fraction
  +netKg: BigDecimal
  +amount: Money
  +status: BatchStatus
  +commit()
}
enum BatchStatus { Draft; Calculated; Committed; Cancelled }

class Route {
  +id: UUID
  +date: LocalDate
  +driverId: UUID
  +vehicleId: UUID
  +status: RouteStatus
  +assign(driver, vehicle)
  +start()
  +close()
}
enum RouteStatus { Planned; Assigned; InProgress; Delivered; Closed; Cancelled }

class Stop {
  +id: UUID
  +routeId: UUID
  +pointId: UUID
  +seq: int
  +status: StopStatus
  +arrive()
  +complete(volume: BigDecimal, mass: BigDecimal)
  +block(reason: String)
}
enum StopStatus { Planned; Arrived; Completed; Skipped; Blocked }

Route "1" o-- "*" Stop
@enduml
