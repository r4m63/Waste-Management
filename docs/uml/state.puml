@startuml
title State — Batch & Route
skinparam defaultFontName "DejaVu Sans"

state "Batch" as B {
  [*] --> Draft
  Draft --> Calculated : тариф применён
  Calculated --> Committed : чек напечатан\nзапись сохранена
  Calculated --> Cancelled : отмена
  Committed --> [*]
  Cancelled --> [*]
}

state "Route" as R {
  [*] --> Planned
  Planned --> Assigned : назначение водителя/ТС
  Assigned --> InProgress : старт смены
  InProgress --> Delivered : все точки выполнены
  Delivered --> Closed : финальная сдача/отчёт
  InProgress --> Cancelled : отмена/инцидент
  Closed --> [*]
  Cancelled --> [*]
}
@enduml
