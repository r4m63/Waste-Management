@startuml
title Deployment â€” WildFly + PostgreSQL + Frontends
skinparam defaultFontName "DejaVu Sans"

node "Edge Site" {
  [POS UI (React, kiosk-mode)]
}

node "Web/CDN" {
  [Landing (Next.js)]
  [Driver App (Next.js PWA)]
}

node "DC/Cloud" {
  node "WildFly Cluster" {
    [WMIS Monolith WAR]
  }
  database "PostgreSQL (HA)" as PG
  node "Keycloak" as AUTH
}

[POS UI (React, kiosk-mode)] --> [WMIS Monolith WAR] : HTTPS/OIDC
[Landing (Next.js)] --> [WMIS Monolith WAR] : HTTPS
[Driver App (Next.js PWA)] --> [WMIS Monolith WAR] : HTTPS/OIDC

[WMIS Monolith WAR] --> PG : JDBC (JTA)
[WMIS Monolith WAR] --> AUTH : OIDC
@enduml
